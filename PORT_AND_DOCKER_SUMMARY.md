# âœ… ç«¯å£é…ç½®å’Œ Docker éƒ¨ç½²å·²å®Œæˆ

## ğŸ“‹ é—®é¢˜è§£ç­”

### 1ï¸âƒ£ è¿è¡Œæ–¹å¼ï¼šæ”¯æŒä¸¤ç§

#### æ–¹å¼ A: Docker å®¹å™¨åŒ–ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
```bash
docker-compose up -d
```
- âœ… ç¯å¢ƒéš”ç¦»
- âœ… ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
- âœ… è‡ªåŠ¨é…ç½®æ•°æ®åº“å’Œ Redis
- âœ… ä¾¿äºæ‰©å±•å’Œéƒ¨ç½²

#### æ–¹å¼ B: æœ¬åœ°ç›´æ¥è¿è¡Œï¼ˆå¼€å‘è°ƒè¯•ï¼‰
```bash
# åç«¯
cd backend && uvicorn main:app --port 8888 --reload

# å‰ç«¯
cd frontend && npm run dev
```
- âœ… ä»£ç çƒ­é‡è½½
- âœ… ä¾¿äºè°ƒè¯•
- âœ… æ€§èƒ½æ›´å¥½

---

### 2ï¸âƒ£ ç«¯å£å·²ä¿®æ”¹é¿å…å†²çª

| æœåŠ¡ | åŸç«¯å£ | æ–°ç«¯å£ | è¯´æ˜ |
|-----|-------|-------|-----|
| å‰ç«¯ | 3000 | **5173** | Vite é»˜è®¤ç«¯å£ |
| åç«¯ | 8000 | **8888** | FastAPI æœåŠ¡ |
| PostgreSQL | 5432 | **5433** | æ•°æ®åº“ |
| Redis | 6379 | **6380** | ç¼“å­˜/é˜Ÿåˆ— |

---

## ğŸ‰ å·²åˆ›å»ºçš„æ–‡ä»¶

### Docker é…ç½®æ–‡ä»¶
- âœ… `docker-compose.yml` - å®Œæ•´çš„ 5 æœåŠ¡ç¼–æ’
- âœ… `backend/Dockerfile` - åç«¯å®¹å™¨é…ç½®
- âœ… `frontend/Dockerfile` - å‰ç«¯å®¹å™¨é…ç½®
- âœ… `.env.docker` - Docker ç¯å¢ƒå˜é‡æ¨¡æ¿
- âœ… `backend/.dockerignore` - åç«¯å¿½ç•¥æ–‡ä»¶
- âœ… `frontend/.dockerignore` - å‰ç«¯å¿½ç•¥æ–‡ä»¶

### æ–‡æ¡£
- âœ… `DOCKER_GUIDE.md` - Docker å®Œæ•´éƒ¨ç½²æŒ‡å—ï¼ˆè¯¦ç»†ï¼‰
- âœ… `DEPLOYMENT_REFERENCE.md` - éƒ¨ç½²å¿«é€Ÿå‚è€ƒï¼ˆé€ŸæŸ¥ï¼‰

### å·²æ›´æ–°çš„é…ç½®
- âœ… `frontend/vite.config.ts` - ç«¯å£æ”¹ä¸º 5173
- âœ… `frontend/.env.example` - API åœ°å€æ”¹ä¸º 8888
- âœ… `frontend/src/config/constants.ts` - API åœ°å€æ”¹ä¸º 8888
- âœ… `start_all.sh` - æ”¯æŒ Docker/æœ¬åœ°ä¸¤ç§å¯åŠ¨æ–¹å¼

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆ3æ­¥ï¼‰

### æ–¹å¼ 1: Dockerï¼ˆæ¨èï¼‰

```bash
# 1. é…ç½® API Keys
cp .env.docker .env
nano .env  # å¡«å†™ OPENAI_API_KEY ç­‰

# 2. å¯åŠ¨
docker-compose up -d

# 3. è®¿é—®
# å‰ç«¯: http://localhost:5173
# åç«¯: http://localhost:8888
```

### æ–¹å¼ 2: ä½¿ç”¨å¯åŠ¨è„šæœ¬

```bash
./start_all.sh
# é€‰æ‹©é€‰é¡¹ 1 - Docker å¯åŠ¨
```

---

## ğŸ“Š Docker æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç”¨æˆ·æµè§ˆå™¨                     â”‚
â”‚      http://localhost:5173              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Frontend (React)                   â”‚
â”‚   Container: bidding_frontend           â”‚
â”‚        Port: 5173                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Backend (FastAPI)                  â”‚
â”‚   Container: bidding_backend            â”‚
â”‚        Port: 8888                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚          â”‚
        â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PostgreSQLâ”‚  â”‚Celery Workerâ”‚
â”‚Port: 5433â”‚  â”‚ (Background)â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Redis    â”‚
      â”‚ Port: 6380 â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ å¸¸ç”¨æ“ä½œ

### Docker åŸºç¡€å‘½ä»¤

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart

# é‡å»ºå®¹å™¨
docker-compose up -d --build
```

### è¿›å…¥å®¹å™¨è°ƒè¯•

```bash
# è¿›å…¥åç«¯å®¹å™¨
docker-compose exec backend bash

# è¿›å…¥æ•°æ®åº“
docker-compose exec postgres psql -U postgres -d bidding_db

# è¿›å…¥ Redis
docker-compose exec redis redis-cli
```

### æœ¬åœ°å¼€å‘

```bash
# åç«¯ï¼ˆç«¯å£ 8888ï¼‰
cd backend
uvicorn main:app --host 0.0.0.0 --port 8888 --reload

# å‰ç«¯ï¼ˆç«¯å£ 5173ï¼‰
cd frontend
npm run dev
```

---

## ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®

### Docker æ–¹å¼
- ç¯å¢ƒå˜é‡: `.env` (å¤åˆ¶è‡ª `.env.docker`)
- æœåŠ¡ç¼–æ’: `docker-compose.yml`

### æœ¬åœ°æ–¹å¼
- åç«¯é…ç½®: `backend/.env`
- å‰ç«¯é…ç½®: `frontend/.env`

---

## ğŸ¯ è®¿é—®åœ°å€

### Docker æ–¹å¼
- å‰ç«¯: http://localhost:5173
- åç«¯ API: http://localhost:8888
- API æ–‡æ¡£: http://localhost:8888/docs
- æ•°æ®åº“: localhost:5433
- Redis: localhost:6380

### æœ¬åœ°æ–¹å¼
- å‰ç«¯: http://localhost:5173
- åç«¯ API: http://localhost:8888
- æ•°æ®åº“: localhost:5432 (éœ€è‡ªè¡Œå®‰è£…)
- Redis: localhost:6379 (éœ€è‡ªè¡Œå®‰è£…)

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

éœ€è¦æ›´å¤šä¿¡æ¯ï¼ŸæŸ¥çœ‹ï¼š

1. **Docker å®Œæ•´æŒ‡å—**: `DOCKER_GUIDE.md`
   - Docker å®‰è£…
   - è¯¦ç»†é…ç½®è¯´æ˜
   - æ•…éšœæ’é™¤
   - ç”Ÿäº§ç¯å¢ƒå»ºè®®

2. **éƒ¨ç½²å¿«é€Ÿå‚è€ƒ**: `DEPLOYMENT_REFERENCE.md`
   - å‘½ä»¤é€ŸæŸ¥
   - å¸¸è§é—®é¢˜
   - é…ç½®é€ŸæŸ¥

3. **å‰ç«¯ç³»ç»Ÿè¯´æ˜**: `FRONTEND_GUIDE.md`
   - å‰ç«¯åŠŸèƒ½ä»‹ç»
   - é¡µé¢è¯´æ˜
   - å¼€å‘æŒ‡å—

---

## âœ… æ€»ç»“

### ç«¯å£å·²ä¿®æ”¹ä¸ºï¼š
- **å‰ç«¯**: 5173ï¼ˆåŸ 3000ï¼‰
- **åç«¯**: 8888ï¼ˆåŸ 8000ï¼‰
- **æ•°æ®åº“**: 5433ï¼ˆåŸ 5432ï¼‰
- **Redis**: 6380ï¼ˆåŸ 6379ï¼‰

### è¿è¡Œæ–¹å¼ï¼š
1. **Docker å®¹å™¨åŒ–**ï¼ˆæ¨èï¼‰- ä¸€é”®å¯åŠ¨ï¼Œç¯å¢ƒéš”ç¦»
2. **æœ¬åœ°ç›´æ¥è¿è¡Œ** - ä¾¿äºå¼€å‘è°ƒè¯•

### å¿«é€Ÿå¯åŠ¨ï¼š
```bash
# Docker æ–¹å¼
docker-compose up -d

# æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬
./start_all.sh
```

**ç°åœ¨å¯ä»¥æ— å†²çªåœ°å¯åŠ¨ç³»ç»Ÿäº†ï¼** ğŸ‰
