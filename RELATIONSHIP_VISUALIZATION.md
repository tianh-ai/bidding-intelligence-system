# ğŸ“Š verify_new_parser â†” init_database å…³ç³»å¯è§†åŒ–

## ASCIIå…³ç³»å›¾ (æ”¯æŒç»ˆç«¯æŸ¥çœ‹)

### 1. è¡¨ç»“æ„å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        UPLOADED_FILES (æ ¸å¿ƒæ¢çº½è¡¨)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PK: id (UUID)                                                      â”‚  â”‚
â”‚  â”‚ file_name, file_path, file_size                                    â”‚  â”‚
â”‚  â”‚ upload_status (pending|completed|failed)                           â”‚  â”‚
â”‚  â”‚ parse_status  (pending|processing|completed|failed)                â”‚  â”‚
â”‚  â”‚ storage_location: /Volumes/ssd/bidding-data/uploads               â”‚  â”‚
â”‚  â”‚ created_at, updated_at                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ FK           â”‚ FK                â”‚ FK
               â”‚              â”‚                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ PARSING_    â”‚  â”‚ KNOWLEDGE_    â”‚  â”‚ VERIFICATION_â”‚
        â”‚ RESULTS     â”‚  â”‚ BASE          â”‚  â”‚ TRACKING     â”‚
        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
        â”‚ 1:1         â”‚  â”‚ 1:N           â”‚  â”‚ 1:1          â”‚
        â”‚ (ä¸€ä¸ªæ–‡ä»¶1æ¡ â”‚  â”‚ (ä¸€ä¸ªæ–‡ä»¶Næ¡) â”‚  â”‚ (ä¸€ä¸ªæ–‡ä»¶1æ¡) â”‚
        â”‚  è§£æç»“æœ)  â”‚  â”‚  çŸ¥è¯†æ¡é¡¹)    â”‚  â”‚  è¿½è¸ªè®°å½•)   â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                â”‚                 â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ PARSING_VERIFICATION_MAPPING â”‚
        â”‚ (å…³ç³»æ˜ å°„è¡¨ - Junction)      â”‚
        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
        â”‚ è®°å½•ä¸‰è€…çš„å…³ç³»              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ•°æ®æµæ–¹å‘å›¾

```
                    ç”¨æˆ·ä¸Šä¼ PDF
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  File Upload Handler (files.py) â”‚
        â”‚  - ä¿å­˜æ–‡ä»¶åˆ°SSD              â”‚
        â”‚  - è·å¾—file_pathå’Œfile_size   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ã€init_database.pyä½œç”¨åŸŸã€‘             â”‚
        â”‚  INSERT INTO uploaded_files            â”‚
        â”‚  id: UUID (è‡ªåŠ¨ç”Ÿæˆ)                   â”‚
        â”‚  file_name, file_path, file_size      â”‚
        â”‚  upload_status: "completed"           â”‚
        â”‚  parse_status: "pending" â† å…³é”®çŠ¶æ€  â”‚
        â”‚  created_at: NOW()                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ã€verify_new_parser.pyä½œç”¨åŸŸã€‘         â”‚
        â”‚  1. ParseEngine.parse(file_path)      â”‚
        â”‚  2. EnhancedChapterExtractor.extract() â”‚
        â”‚  3. ç”Ÿæˆ verification_result         â”‚
        â”‚     {                                 â”‚
        â”‚       matched_count: 14,              â”‚
        â”‚       total_toc_items: 16,            â”‚
        â”‚       accuracy_score: 87.5,           â”‚
        â”‚       toc_verification: [...]         â”‚
        â”‚     }                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ã€æ•°æ®å­˜å‚¨ - 4ä¸ªè¡¨çš„å¹¶è¡Œæ’å…¥ã€‘                 â”‚
        â”‚                                               â”‚
        â”‚  â”Œâ”€ UPDATE uploaded_files                    â”‚
        â”‚  â”‚  SET parse_status = "completed"          â”‚
        â”‚  â”‚  WHERE id = file_id                      â”‚
        â”‚  â”‚                                          â”‚
        â”‚  â”œâ”€ INSERT INTO parsing_results             â”‚
        â”‚  â”‚  (id, file_id, accuracy_score,           â”‚
        â”‚  â”‚   result_json, ...)                      â”‚
        â”‚  â”‚                                          â”‚
        â”‚  â”œâ”€ INSERT INTO verification_tracking       â”‚
        â”‚  â”‚  (id, file_id, parsing_result_id,        â”‚
        â”‚  â”‚   toc_verification_details, ...)         â”‚
        â”‚  â”‚                                          â”‚
        â”‚  â”œâ”€ INSERT INTO parsing_verification_mappingâ”‚
        â”‚  â”‚  (file_id, parsing_result_id,            â”‚
        â”‚  â”‚   verification_tracking_id, ...)         â”‚
        â”‚  â”‚                                          â”‚
        â”‚  â””â”€ INSERT INTO knowledge_base (å¤šæ¡)        â”‚
        â”‚     FOR EACH extracted_chapter:             â”‚
        â”‚       file_id, chapter_source,              â”‚
        â”‚       extraction_confidence, ...             â”‚
        â”‚                                            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  âœ… å®Œæˆ                                 â”‚
        â”‚  - æ–‡ä»¶å·²å¤„ç†                           â”‚
        â”‚  - ç»“æœå·²å­˜å‚¨                           â”‚
        â”‚  - æ•°æ®å·²å…³è”                           â”‚
        â”‚  - çŸ¥è¯†å·²æå–                           â”‚
        â”‚  - æµç¨‹å·²è¿½è¸ª                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æ—¶é—´åºåˆ—å›¾

```
æ—¶é—´è½´ (T = upload_timestamp)

T+0ç§’
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ æ–‡ä»¶ä¸Šä¼ å®Œæˆ                         â”‚
     â”‚ uploaded_files.created_at = T+0     â”‚
     â”‚ parse_status = "pending"            â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
T+30ç§’ (ç”¨æˆ·ç‚¹å‡»è§£ææˆ–è‡ªåŠ¨è§¦å‘)
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚
                                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ verify_new_parser å¼€å§‹              â”‚
                    â”‚ verification_start_time = T+30s   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
T+33ç§’ (è§£æå®Œæˆ)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                          â”‚
                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”
                                       â”‚ parsing_time: 3.45s â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
T+34ç§’ (éªŒè¯å®Œæˆ)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                          â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                        â”‚ verification_end_time = T+34s        â”‚
                        â”‚ verification_duration = 4.23s        â”‚
                        â”‚ accuracy_score: 87.5%               â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
T+35ç§’ (ç»“æœå­˜å‚¨)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
          â”‚ parsing_results.created_at = T+35s  â”‚â—„â”€â”€â”˜
          â”‚ verification_tracking.created_at = T+35s
          â”‚ knowledge_base.created_at = T+35s+Îµ
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
T+36ç§’ (å®Œæˆ)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                          â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                        â”‚ uploaded_files.parse_status = "completed"
                        â”‚ uploaded_files.updated_at = T+36s    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. å¤–é”®å…³ç³»é“¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¤–é”®çº¦æŸå…³ç³»é“¾                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

                    uploaded_files (id)
                           â–³
                           â”‚ FK
                    â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      â”‚        â”‚            â”‚
           file_id  â”‚      â”‚ file_idâ”‚ file_id    â”‚
                    â”‚      â”‚        â”‚            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”   â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ parsing_    â”‚   â”‚   â”‚ knowledge â”‚   â”‚verification  â”‚
        â”‚ results     â”‚   â”‚   â”‚ _base     â”‚   â”‚ _tracking    â”‚
        â”‚ (id)â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”˜   â”‚           â”‚   â”‚ (id)         â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                   â”‚    â”‚
        file_idâ”‚                                   â”‚    â”‚
               â”‚                              file_id   â”‚
               â”‚                                   â”‚    â”‚
         parsing_result_idâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
                                               â”‚  â”‚    â”‚
                                        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â–¼â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                                        â”‚ parsing_verification
                                        â”‚ _mapping (Junction)
                                        â”‚ - file_id
                                        â”‚ - parsing_result_id
                                        â”‚ - verification_tracking_id
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çº¦æŸè§„åˆ™:
  â”œâ”€ ON DELETE CASCADE: åˆ é™¤uploaded_filesæ—¶æ¸…ç©ºæ‰€æœ‰å…³è”æ•°æ®
  â”œâ”€ FOREIGN KEY CHECK: ä¿è¯æ•°æ®å¼•ç”¨æœ‰æ•ˆ
  â”œâ”€ NOT NULL: file_idå¿…é¡»å­˜åœ¨
  â””â”€ UNIQUE: parsing_result_id/verification_tracking_idå…¨å±€å”¯ä¸€
```

### 5. çŠ¶æ€è½¬ç§»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              UPLOADED_FILES çš„çŠ¶æ€è½¬ç§»                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ pending  â”‚  â† åˆå§‹çŠ¶æ€ (æ–‡ä»¶ä¸Šä¼ å®Œæˆ)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ ç”¨æˆ·ç‚¹å‡»è§£æ æˆ–è‡ªåŠ¨è§¦å‘
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ processing   â”‚  â† è§£æä¸­ (verify_new_parseræ‰§è¡Œä¸­)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ verify_new_parserå®Œæˆ
     â”‚
     â”œâ”€ (æˆåŠŸ) â”€â”€â”€â”€â”€â”
     â”‚               â–¼
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚         â”‚ completed    â”‚  â† å®ŒæˆçŠ¶æ€
     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â””â”€ (å¤±è´¥) â”€â”€â”€â”€â”€â”
                   â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ failed       â”‚  â† å¤±è´¥çŠ¶æ€ (é”™è¯¯å¤„ç†)
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PARSING_RESULTS çš„çŠ¶æ€è½¬ç§»:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ pending  â”‚â”€â”€â–¶â”‚ processing   â”‚â”€â”€â–¶â”‚ completed    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ failed       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VERIFICATION_TRACKING çš„çŠ¶æ€è½¬ç§»:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ pending  â”‚â”€â”€â–¶â”‚ completed    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ failed       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6. æ•°æ®é‡å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              1ä¸ªæ–‡ä»¶çš„æ•°æ®é‡å…³ç³»                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

    1 ä¸ª uploaded_files è®°å½•
            â”‚
            â”œâ”€ 1 Ã— parsing_results è®°å½•
            â”‚  â””â”€ åŒ…å«: result_json (å®Œæ•´éªŒè¯æ•°æ®)
            â”‚
            â”œâ”€ 1 Ã— verification_tracking è®°å½•
            â”‚  â””â”€ åŒ…å«: toc_verification_details (JSONB)
            â”‚
            â”œâ”€ 1 Ã— parsing_verification_mapping è®°å½•
            â”‚  â””â”€ å…³ç³»æ˜ å°„
            â”‚
            â””â”€ N Ã— knowledge_base è®°å½• (é€šå¸¸ 20-100 æ¡)
               â””â”€ å¯¹åº”æ¯ä¸ªæå–çš„çŸ¥è¯†æ¡é¡¹

ç¤ºä¾‹ (ä¸€ä¸ªçœŸå®æ–‡ä»¶):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶: æ‹›æ ‡.pdf (2MB, 156é¡µ)                              â”‚
â”‚                                                          â”‚
â”‚ â”œâ”€ 1 Ã— uploaded_files (500 bytes)                      â”‚
â”‚ â”‚
â”‚ â”œâ”€ 1 Ã— parsing_results (5KB - 10KB)                    â”‚
â”‚ â”‚  â””â”€ result_json: {                                   â”‚
â”‚ â”‚      total_toc_items: 16,                           â”‚
â”‚ â”‚      matched_count: 14,                             â”‚
â”‚ â”‚      accuracy_score: 87.5,                          â”‚
â”‚ â”‚      toc_verification: [...14 items...]             â”‚
â”‚ â”‚    }                                                â”‚
â”‚ â”‚
â”‚ â”œâ”€ 1 Ã— verification_tracking (3KB - 5KB)              â”‚
â”‚ â”‚  â””â”€ toc_verification_details: [è¯¦ç»†æ•°æ®]             â”‚
â”‚ â”‚
â”‚ â”œâ”€ 1 Ã— parsing_verification_mapping (1KB)             â”‚
â”‚ â”‚
â”‚ â””â”€ 42 Ã— knowledge_base (å„300-500 bytes)              â”‚
â”‚    â””â”€ æ€»è®¡: ~20KB                                     â”‚
â”‚                                                       â”‚
â”‚ æ€»æ•°æ®é‡: ~30KB (é«˜åº¦å‹ç¼©ï¼Œæ”¯æŒå¿«é€ŸæŸ¥è¯¢)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7. å®Œæ•´å…³ç³»æ‹“æ‰‘å›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ç”¨æˆ·Action       â”‚
                    â”‚ (ä¸Šä¼ /æŸ¥è¯¢/åˆ†æ)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚               â”‚               â”‚
             â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Upload       â”‚ â”‚ Verify      â”‚ â”‚ Query          â”‚
    â”‚ Handler      â”‚ â”‚ Parser      â”‚ â”‚ & Analysis     â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                â”‚                 â”‚
           â”‚                â”‚                 â”‚
           â–¼                â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          ğŸ“Š æ•°æ®åº“å±‚ (6ä¸ªè¡¨)                      â”‚
    â”‚                                                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ uploaded_files (æ ¸å¿ƒæ¢çº½)               â”‚   â”‚
    â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚      â”‚             â”‚          â”‚       â”‚         â”‚
    â”‚      â–¼             â–¼          â–¼       â–¼         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚parsing_  â”‚ â”‚know-   â”‚ â”‚verif-â”‚ â”‚parsing â”‚   â”‚
    â”‚  â”‚results   â”‚ â”‚ledge_  â”‚ â”‚ication_â”‚_verifi  â”‚   â”‚
    â”‚  â”‚          â”‚ â”‚base    â”‚ â”‚trackingâ”‚cation  â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚_mappingâ”‚   â”‚
    â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ relationships_documentation             â”‚   â”‚
    â”‚  â”‚ (å…³ç³»æ–‡æ¡£è¡¨ - å…ƒæ•°æ®)                  â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”
            â”‚       â”‚       â”‚
            â–¼       â–¼       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æŸ¥è¯¢& åˆ†æå±‚                            â”‚
    â”‚  RELATIONSHIP_QUERIES.md (13ä¸ªæŸ¥è¯¢)      â”‚
    â”‚                                          â”‚
    â”‚  â”œâ”€ ç”Ÿå‘½å‘¨æœŸè¿½è¸ª                         â”‚
    â”‚  â”œâ”€ å‡†ç¡®ç‡åˆ†æ                          â”‚
    â”‚  â”œâ”€ çŸ¥è¯†åº“è¿½è¸ª                          â”‚
    â”‚  â”œâ”€ å®Œæ•´æ€§æ£€æŸ¥                          â”‚
    â”‚  â””â”€ æ€§èƒ½åˆ†æ                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ å°ºå¯¸å‚è€ƒ

### è¡¨å¤§å°ä¼°è®¡ (å•ä¸ªæ–‡ä»¶)

```
è¡¨å                        | è®°å½•æ•° | å•æ¡å¤§å°  | æ€»å¤§å°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
uploaded_files              | 1     | 500B    | 500B
parsing_results             | 1     | 5-10KB  | 5-10KB
verification_tracking       | 1     | 3-5KB   | 3-5KB
parsing_verification_mapping| 1     | 1KB     | 1KB
knowledge_base              | 42    | 300-500B| 12-20KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡                        | 46    |         | ~22-36KB
```

### ç³»ç»Ÿè§„æ¨¡ (100ä¸ªæ–‡ä»¶)

```
æ€»records: 4600
æ€»æ•°æ®é‡: ~2.2-3.6MB (ä¸å«ç´¢å¼•)
æŸ¥è¯¢å“åº”: < 100ms (æ­£å¸¸ç¡¬ç›˜)
æŸ¥è¯¢å“åº”: < 10ms  (SSD)
```

---

## ğŸ” å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| è§£æè€—æ—¶ | 2-5ç§’ | å¹³å‡å•ä¸ªPDFè§£ææ—¶é—´ |
| éªŒè¯è€—æ—¶ | 3-6ç§’ | verify_new_parseræ‰§è¡Œæ—¶é—´ |
| å‡†ç¡®ç‡ | 80-95% | å…¸å‹TOCåŒ¹é…ç‡ |
| çŸ¥è¯†æå– | 30-60æ¡ | å•ä¸ªæ–‡ä»¶çš„çŸ¥è¯†æ¡é¡¹æ•° |
| å­˜å‚¨æ•ˆç‡ | ~20KB/æ–‡ä»¶ | é«˜åº¦å‹ç¼© |
| æŸ¥è¯¢é€Ÿåº¦ | <100ms | å¤æ‚å…³è”æŸ¥è¯¢ |

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

```
åœºæ™¯1: è¿½è¸ªå•ä¸ªæ–‡ä»¶
  ç”¨æˆ· â†’ ä¸Šä¼ PDF â†’ æŸ¥è¯¢ç”Ÿå‘½å‘¨æœŸ (æŸ¥è¯¢3)
  â””â”€ äº†è§£: ä½•æ—¶ä¸Šä¼ ã€ä½•æ—¶è§£æã€è§£æå‡†ç¡®ç‡

åœºæ™¯2: æ‰¹é‡åˆ†æ
  100ä¸ªæ–‡ä»¶ â†’ ç»Ÿè®¡å‡†ç¡®ç‡åˆ†å¸ƒ (æŸ¥è¯¢5)
  â””â”€ äº†è§£: æ•´ä½“ç³»ç»Ÿæ€§èƒ½

åœºæ™¯3: è´¨é‡ç›‘æ§
  å®æ—¶ç›‘æ§ â†’ è¯†åˆ«å‡†ç¡®ç‡ä½çš„æ–‡ä»¶ (æŸ¥è¯¢6)
  â””â”€ äº†è§£: å“ªäº›æ–‡ä»¶éœ€è¦é‡æ–°å¤„ç†

åœºæ™¯4: çŸ¥è¯†æº¯æº
  çŸ¥è¯†æ¡é¡¹ â†’ åæŸ¥æ¥æºæ–‡ä»¶ (æŸ¥è¯¢8)
  â””â”€ äº†è§£: è¿™æ¡ä¿¡æ¯ä»å“ªé‡Œæ¥

åœºæ™¯5: æ€§èƒ½ä¼˜åŒ–
  åˆ†æç“¶é¢ˆ â†’ æ‰¾å‡ºæœ€æ…¢çš„æ–‡ä»¶ (æŸ¥è¯¢13)
  â””â”€ äº†è§£: å¦‚ä½•ä¼˜åŒ–å¤„ç†æµç¨‹
```

---

è¿™ä¸ªå¯è§†åŒ–æŒ‡å—å¸®åŠ©æ‚¨ç†è§£ä¸¤ä¸ªè„šæœ¬åœ¨ç³»ç»Ÿä¸­çš„å®Œæ•´å…³ç³»ï¼

