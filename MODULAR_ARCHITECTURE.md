# ğŸ—ï¸ æ¨¡å—åŒ–æ¶æ„è®¾è®¡æ–¹æ¡ˆ

> **è®¾è®¡ç†å¿µ**: é€šè¿‡ MCP æœåŠ¡å™¨ + ç‹¬ç«‹æŠ€èƒ½ï¼ˆSkillsï¼‰å®ç°åŠŸèƒ½è§£è€¦ã€æ¥å£ç»Ÿä¸€ã€æ˜“äºè°ƒè¯•å’Œå‡çº§  
> **æ›´æ–°æ—¥æœŸ**: 2025-12-16

---

## ğŸ“‹ ç›®å½•

- [1. æ¶æ„è®¾è®¡åŸåˆ™](#1-æ¶æ„è®¾è®¡åŸåˆ™)
- [2. æ¨¡å—åˆ†ç±»ç­–ç•¥](#2-æ¨¡å—åˆ†ç±»ç­–ç•¥)
- [3. æ ‡å‡†ç›®å½•ç»“æ„](#3-æ ‡å‡†ç›®å½•ç»“æ„)
- [4. æ¥å£è§„èŒƒ](#4-æ¥å£è§„èŒƒ)
- [5. ç°æœ‰åŠŸèƒ½æ¨¡å—æ¸…å•](#5-ç°æœ‰åŠŸèƒ½æ¨¡å—æ¸…å•)
- [6. è¿ç§»å®æ–½è®¡åˆ’](#6-è¿ç§»å®æ–½è®¡åˆ’)
- [7. å¼€å‘æŒ‡å—](#7-å¼€å‘æŒ‡å—)
- [8. è´¨é‡ä¿éšœ](#8-è´¨é‡ä¿éšœ)

---

## 1. æ¶æ„è®¾è®¡åŸåˆ™

### 1.1 æ ¸å¿ƒåŸåˆ™

#### âœ… å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰
- æ¯ä¸ª MCP æœåŠ¡å™¨åªè´Ÿè´£ä¸€ä¸ªé¢†åŸŸ
- æ¯ä¸ª Skill åªå®ç°ä¸€ä¸ªå…·ä½“åŠŸèƒ½
- é¿å…åŠŸèƒ½è€¦åˆå’Œäº¤å‰ä¾èµ–

#### âœ… æ¥å£æ ‡å‡†åŒ–
- æ‰€æœ‰ MCP æœåŠ¡å™¨éµå¾ª Model Context Protocol è§„èŒƒ
- ç»Ÿä¸€çš„è¾“å…¥è¾“å‡ºæ ¼å¼ï¼ˆJSON Schemaï¼‰
- æ ‡å‡†çš„é”™è¯¯å¤„ç†æœºåˆ¶

#### âœ… å¯æ’æ‹”è®¾è®¡
- ä»»ä½•æ¨¡å—å¯ç‹¬ç«‹å‡çº§æˆ–æ›¿æ¢
- ä¸å½±å“å…¶ä»–æ¨¡å—è¿è¡Œ
- æ”¯æŒå¤šç§å®ç°æ–¹å¼ï¼ˆæœ¬åœ°/è¿œç¨‹/ç¬¬ä¸‰æ–¹ï¼‰

#### âœ… æ˜“äºæµ‹è¯•å’Œè°ƒè¯•
- æ¯ä¸ªæ¨¡å—æœ‰ç‹¬ç«‹æµ‹è¯•å¥—ä»¶
- æ¸…æ™°çš„æ—¥å¿—å’Œé”™è¯¯è¿½è¸ª
- æ”¯æŒå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

---

## 2. æ¨¡å—åˆ†ç±»ç­–ç•¥

### 2.1 MCP æœåŠ¡å™¨ï¼ˆé€‚ç”¨åœºæ™¯ï¼‰

**ç‰¹å¾**: éœ€è¦ AI åŠ©æ‰‹ï¼ˆClaudeã€Copilotï¼‰ç›´æ¥è°ƒç”¨çš„åŠŸèƒ½

**é€‚ç”¨åŠŸèƒ½**:
- âœ… **æ–‡æ¡£è§£æ** - AI éœ€è¦ç†è§£æ–‡æ¡£ç»“æ„
- âœ… **çŸ¥è¯†åº“æ£€ç´¢** - AI éœ€è¦æŸ¥è¯¢å†å²æ•°æ®
- âœ… **é€»è¾‘éªŒè¯** - AI éœ€è¦æ£€æŸ¥å†…å®¹ä¸€è‡´æ€§
- âœ… **ä¸“å®¶å’¨è¯¢** - AI éœ€è¦è·å–é¢†åŸŸçŸ¥è¯†

**ä¼˜åŠ¿**:
- AI å¯ç›´æ¥è°ƒç”¨ï¼Œæ— éœ€ç¼–å†™èƒ¶æ°´ä»£ç 
- æ ‡å‡†åŒ–æ¥å£ï¼Œå¤šå¹³å°å…¼å®¹
- ç‹¬ç«‹è¿›ç¨‹ï¼Œæ•…éšœéš”ç¦»

**åŠ£åŠ¿**:
- å¯åŠ¨å¼€é”€ï¼ˆéœ€è¦ Node è¿›ç¨‹ï¼‰
- è·¨è¯­è¨€é€šä¿¡ï¼ˆTypeScript â†” Pythonï¼‰

---

### 2.2 ç‹¬ç«‹æŠ€èƒ½ï¼ˆSkillsï¼‰

**ç‰¹å¾**: åç«¯ API è°ƒç”¨çš„çº¯åŠŸèƒ½æ¨¡å—

**é€‚ç”¨åŠŸèƒ½**:
- âœ… **è¡¨æ ¼æå–** - çº¯æŠ€æœ¯å¤„ç†
- âœ… **OCRè¯†åˆ«** - å›¾åƒå¤„ç†
- âœ… **æ ¼å¼è½¬æ¢** - æ•°æ®è½¬æ¢
- âœ… **ç¼“å­˜ç®¡ç†** - åŸºç¡€è®¾æ–½

**ä¼˜åŠ¿**:
- è½»é‡çº§ï¼Œæ— é¢å¤–è¿›ç¨‹
- Python ç›´æ¥è°ƒç”¨ï¼Œæ€§èƒ½é«˜
- æ˜“äºå•å…ƒæµ‹è¯•

**å®ç°æ–¹å¼**:
```python
# backend/skills/table_extractor.py
class TableExtractorSkill:
    """è¡¨æ ¼æå–æŠ€èƒ½ - ç‹¬ç«‹å¯æµ‹è¯•"""
    
    def extract(self, pdf_path: str) -> List[Table]:
        """æå–è¡¨æ ¼"""
        # çº¯åŠŸèƒ½å®ç°
        pass
```

---

### 2.3 æ··åˆæ¨¡å¼

**åœºæ™¯**: æ—¢éœ€è¦ AI è°ƒç”¨ï¼Œåˆéœ€è¦åç«¯ç›´æ¥è°ƒç”¨

**ç¤ºä¾‹**: çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰
- **MCP å±‚**: ä¾› AI åŠ©æ‰‹æŸ¥è¯¢çŸ¥è¯†
- **HTTP API å±‚**: ä¾›å‰ç«¯è°ƒç”¨
- **Python SDK å±‚**: ä¾›åç«¯å¼•æ“è°ƒç”¨

**æ¶æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI åŠ©æ‰‹ï¼ˆClaude Desktopï¼‰               â”‚
â”‚  â†“ MCP åè®®                              â”‚
â”‚  çŸ¥è¯†åº“ MCP æœåŠ¡å™¨ (Node.js)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯ï¼ˆReactï¼‰                           â”‚
â”‚  â†“ HTTP API                              â”‚
â”‚  FastAPI è·¯ç”± (routers/knowledge.py)     â”‚
â”‚  â†“ Python SDK                            â”‚
â”‚  çŸ¥è¯†åº“å¼•æ“ (engines/knowledge_engine.py)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æ ‡å‡†ç›®å½•ç»“æ„

### 3.1 æ•´ä½“ç»“æ„

```
bidding-intelligence-system/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ copilot-instructions.md        # AI åŠ©æ‰‹ä½¿ç”¨è§„èŒƒ
â”‚
â”œâ”€â”€ docs/                               # ğŸ“š è§„èŒƒæ–‡æ¡£ï¼ˆéª¨æ¶ï¼‰
â”‚   â”œâ”€â”€ MODULAR_ARCHITECTURE.md        # æœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ DOCKER_PRINCIPLES.md           # Docker è§„èŒƒ
â”‚   â”œâ”€â”€ PORT_CONSISTENCY.md            # ç«¯å£è§„èŒƒ
â”‚   â”œâ”€â”€ CODE_PROTECTION.md             # ä»£ç ä¿æŠ¤è§„èŒƒ
â”‚   â”œâ”€â”€ API_STANDARDS.md               # ğŸ†• API æ¥å£è§„èŒƒ
â”‚   â”œâ”€â”€ TESTING_GUIDE.md               # ğŸ†• æµ‹è¯•æŒ‡å—
â”‚   â””â”€â”€ DEPLOYMENT_GUIDE.md            # éƒ¨ç½²æŒ‡å—
â”‚
â”œâ”€â”€ mcp-servers/                        # ğŸ”Œ MCP æœåŠ¡å™¨é›†åˆ
â”‚   â”œâ”€â”€ README.md                       # MCP æ€»è§ˆ
â”‚   â”œâ”€â”€ document-parser/                # æ–‡æ¡£è§£æ MCP
â”‚   â”œâ”€â”€ knowledge-base/                 # çŸ¥è¯†åº“ MCP
â”‚   â”œâ”€â”€ logic-checking/                 # ğŸ†• é€»è¾‘éªŒè¯ MCP
â”‚   â”œâ”€â”€ logic-learning/                 # ğŸ†• é€»è¾‘å­¦ä¹  MCP
â”‚   â””â”€â”€ expert-advisor/                 # ğŸ†• ä¸“å®¶é¡¾é—® MCP
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ skills/                         # ğŸ¯ ç‹¬ç«‹æŠ€èƒ½æ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ table_extractor.py         # è¡¨æ ¼æå–æŠ€èƒ½
â”‚   â”‚   â”œâ”€â”€ ocr_processor.py           # OCR å¤„ç†æŠ€èƒ½
â”‚   â”‚   â”œâ”€â”€ format_converter.py        # æ ¼å¼è½¬æ¢æŠ€èƒ½
â”‚   â”‚   â”œâ”€â”€ cache_manager.py           # ç¼“å­˜ç®¡ç†æŠ€èƒ½
â”‚   â”‚   â””â”€â”€ image_processor.py         # å›¾åƒå¤„ç†æŠ€èƒ½
â”‚   â”‚
â”‚   â”œâ”€â”€ engines/                        # ğŸš€ ä¸šåŠ¡å¼•æ“ï¼ˆè°ƒç”¨ Skillsï¼‰
â”‚   â”‚   â”œâ”€â”€ parse_engine.py            # è°ƒç”¨ table_extractor
â”‚   â”‚   â”œâ”€â”€ smart_router.py            # è°ƒç”¨ cache_manager
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ routers/                        # ğŸŒ HTTP API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ files.py
â”‚   â”‚   â”œâ”€â”€ knowledge.py               # è°ƒç”¨ knowledge MCP
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                           # ğŸ”§ æ ¸å¿ƒåŸºç¡€è®¾æ–½
â”‚   â”‚   â”œâ”€â”€ mcp_client.py              # MCP å®¢æˆ·ç«¯åŸºç±»
â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â”œâ”€â”€ logger.py
â”‚   â”‚   â””â”€â”€ cache.py
â”‚   â”‚
â”‚   â””â”€â”€ tests/                          # ğŸ§ª æµ‹è¯•å¥—ä»¶
â”‚       â”œâ”€â”€ test_skills/               # æŠ€èƒ½å•å…ƒæµ‹è¯•
â”‚       â”œâ”€â”€ test_engines/              # å¼•æ“é›†æˆæµ‹è¯•
â”‚       â””â”€â”€ test_mcp/                  # MCP ç«¯åˆ°ç«¯æµ‹è¯•
â”‚
â””â”€â”€ frontend/                           # å‰ç«¯ï¼ˆä¿æŒç°çŠ¶ï¼‰
```

---

### 3.2 MCP æœåŠ¡å™¨æ ‡å‡†ç»“æ„

æ¯ä¸ª MCP æœåŠ¡å™¨éµå¾ªç»Ÿä¸€ç»“æ„ï¼š

```
mcp-servers/<service-name>/
â”œâ”€â”€ package.json                # Node.js é…ç½®
â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â”œâ”€â”€ setup.sh                    # ä¸€é”®å®‰è£…è„šæœ¬
â”œâ”€â”€ README.md                   # æœåŠ¡æ–‡æ¡£
â”‚
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.ts                # MCP åè®®å®ç°ï¼ˆTypeScriptï¼‰
â”‚
â”œâ”€â”€ python/                     # Python åç«¯ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ <service>_backend.py   # å®é™…ä¸šåŠ¡é€»è¾‘
â”‚
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ test_mcp.py            # MCP åè®®æµ‹è¯•
â”‚   â”œâ”€â”€ test_backend.py        # åç«¯é€»è¾‘æµ‹è¯•
â”‚   â””â”€â”€ test_integration.sh    # é›†æˆæµ‹è¯•è„šæœ¬
â”‚
â””â”€â”€ dist/                       # ç¼–è¯‘è¾“å‡ºï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    â””â”€â”€ index.js
```

---

### 3.3 Skill æ¨¡å—æ ‡å‡†ç»“æ„

```python
# backend/skills/<skill_name>.py

from typing import Any, Dict, List
from pydantic import BaseModel

class <Skill>Input(BaseModel):
    """è¾“å…¥æ¨¡å‹ - å¼ºç±»å‹éªŒè¯"""
    pass

class <Skill>Output(BaseModel):
    """è¾“å‡ºæ¨¡å‹ - æ ‡å‡†åŒ–è¿”å›"""
    pass

class <Skill>Skill:
    """
    <åŠŸèƒ½æè¿°>
    
    èŒè´£:
        - å•ä¸€åŠŸèƒ½å®ç°
        - æ— å¤–éƒ¨ä¾èµ–ï¼ˆé™¤æ ‡å‡†åº“ï¼‰
        - å¯ç‹¬ç«‹æµ‹è¯•
    
    ç¤ºä¾‹:
        >>> skill = <Skill>Skill()
        >>> result = skill.execute(input_data)
    """
    
    def __init__(self, config: Dict[str, Any] = None):
        """åˆå§‹åŒ–æŠ€èƒ½"""
        self.config = config or {}
    
    def execute(self, input_data: <Skill>Input) -> <Skill>Output:
        """æ‰§è¡ŒæŠ€èƒ½ä¸»é€»è¾‘"""
        raise NotImplementedError
    
    def validate(self, input_data: Any) -> bool:
        """éªŒè¯è¾“å…¥æ•°æ®"""
        return True
```

---

## 4. æ¥å£è§„èŒƒ

### 4.1 MCP æœåŠ¡å™¨æ¥å£è§„èŒƒ

#### åˆå§‹åŒ–å“åº”æ ¼å¼
```json
{
  "protocolVersion": "2024-11-05",
  "capabilities": {
    "tools": {}
  },
  "serverInfo": {
    "name": "service-name",
    "version": "1.0.0"
  }
}
```

#### å·¥å…·å®šä¹‰æ ¼å¼
```typescript
server.setRequestHandler(ListToolsRequestSchema, async () => ({
  tools: [
    {
      name: "action_name",
      description: "æ¸…æ™°çš„åŠŸèƒ½æè¿°ï¼ˆä¸­æ–‡ï¼‰",
      inputSchema: {
        type: "object",
        properties: {
          param1: {
            type: "string",
            description: "å‚æ•°è¯´æ˜"
          }
        },
        required: ["param1"]
      }
    }
  ]
}));
```

#### é”™è¯¯å“åº”æ ¼å¼
```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "è¯¦ç»†é”™è¯¯ä¿¡æ¯",
    "details": {
      "field": "field_name",
      "reason": "validation failed"
    }
  }
}
```

---

### 4.2 HTTP API æ¥å£è§„èŒƒ

éµå¾ª RESTful è®¾è®¡ï¼š

```python
# POST /api/<resource>/action
@router.post("/<resource>/action")
async def action(request: ActionRequest) -> ActionResponse:
    """
    åŠŸèƒ½æè¿°
    
    Args:
        request: è¯·æ±‚ä½“ï¼ˆPydantic æ¨¡å‹ï¼‰
    
    Returns:
        ActionResponse: æ ‡å‡†å“åº”
    
    Raises:
        HTTPException: é”™è¯¯æƒ…å†µ
    """
    try:
        # è°ƒç”¨ Skill æˆ– Engine
        result = skill.execute(request)
        return ActionResponse(
            success=True,
            data=result
        )
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
```

**æ ‡å‡†å“åº”æ ¼å¼**:
```json
{
  "success": true,
  "data": { ... },
  "message": "æ“ä½œæˆåŠŸ",
  "timestamp": "2025-12-16T10:00:00Z"
}
```

---

### 4.3 Skill æ¥å£è§„èŒƒ

```python
class SkillInterface:
    """æŠ€èƒ½æ¥å£è§„èŒƒï¼ˆæŠ½è±¡åŸºç±»ï¼‰"""
    
    @abstractmethod
    def execute(self, input_data: BaseModel) -> BaseModel:
        """æ‰§è¡Œä¸»é€»è¾‘"""
        pass
    
    def validate(self, input_data: Any) -> bool:
        """éªŒè¯è¾“å…¥"""
        return True
    
    def get_metadata(self) -> Dict[str, Any]:
        """è¿”å›æŠ€èƒ½å…ƒæ•°æ®"""
        return {
            "name": self.__class__.__name__,
            "version": "1.0.0",
            "description": self.__doc__
        }
```

---

## 5. ç°æœ‰åŠŸèƒ½æ¨¡å—æ¸…å•

### 5.1 å·²å®ç° MCP æœåŠ¡å™¨ âœ…

| MCP æœåŠ¡å™¨ | è·¯å¾„ | çŠ¶æ€ | è°ƒç”¨æ–¹å¼ |
|-----------|------|------|---------|
| **document-parser** | `mcp-servers/document-parser/` | âœ… å·²å®Œæˆ | AI åŠ©æ‰‹ç›´æ¥è°ƒç”¨ |
| **knowledge-base** | `mcp-servers/knowledge-base/` | âœ… å·²å®Œæˆ | AI + HTTP API + Python SDK |
| **logic-checking** | `mcp-servers/logic-checking/` | ğŸŸ¡ éƒ¨åˆ†å®ç° | éœ€è¦å®Œå–„ |
| **logic-learning** | `mcp-servers/logic-learning/` | ğŸŸ¡ éƒ¨åˆ†å®ç° | éœ€è¦å®Œå–„ |

---

### 5.2 å¾…è½¬æ¢ä¸º MCP çš„åŠŸèƒ½ ğŸ”„

| åŠŸèƒ½æ¨¡å— | å½“å‰å®ç° | ä¼˜å…ˆçº§ | è½¬æ¢éš¾åº¦ | å»ºè®® |
|---------|---------|-------|---------|-----|
| **é€»è¾‘éªŒè¯** | `engines/chapter_logic_engine.py` | ğŸ”´ é«˜ | ä¸­ | â†’ MCP: `logic-checking` |
| **é€»è¾‘å­¦ä¹ ** | `engines/logic_learning_engine.py` | ğŸ”´ é«˜ | ä¸­ | â†’ MCP: `logic-learning` |
| **ä¸“å®¶ç³»ç»Ÿ** | `engines/multi_agent_evaluator.py` | ğŸŸ¡ ä¸­ | é«˜ | â†’ MCP: `expert-advisor` |
| **æ–‡æ¡£åˆ†ç±»** | `engines/smart_document_classifier.py` | ğŸŸ¢ ä½ | ä½ | â†’ Skill |
| **æ ¼å¼æå–** | `engines/format_extractor.py` | ğŸŸ¢ ä½ | ä½ | â†’ Skill |

---

### 5.3 é€‚åˆä½œä¸º Skill çš„åŠŸèƒ½ ğŸ¯

| åŠŸèƒ½ | å½“å‰å®ç° | æ–°ä½ç½® | çŠ¶æ€ |
|------|---------|--------|-----|
| **è¡¨æ ¼æå–** | `agents/preprocessor.py` (éƒ¨åˆ†) | `skills/table_extractor.py` | ğŸ†• å¾…åˆ›å»º |
| **OCR å¤„ç†** | `engines/ocr_extractor.py` | `skills/ocr_processor.py` | ğŸ†• å¾…åˆ›å»º |
| **å›¾åƒå¤„ç†** | `engines/image_extractor.py` | `skills/image_processor.py` | ğŸ†• å¾…åˆ›å»º |
| **æ ¼å¼è½¬æ¢** | åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ | `skills/format_converter.py` | ğŸ†• å¾…åˆ›å»º |
| **ç¼“å­˜ç®¡ç†** | `core/cache.py` | `skills/cache_manager.py` | ğŸ†• å¾…åˆ›å»º |

---

### 5.4 ä¿æŒç°çŠ¶çš„æ¨¡å— âœ‹

| æ¨¡å— | åŸå›  | ä½ç½® |
|------|------|------|
| **è·¯ç”±å±‚** | FastAPI æ ‡å‡†å®ç° | `routers/*` |
| **æ•°æ®åº“å±‚** | SQLAlchemy ORM | `db/*` |
| **é…ç½®ç®¡ç†** | å·²æ ‡å‡†åŒ– | `core/config.py` |
| **æ—¥å¿—ç³»ç»Ÿ** | å·²æ ‡å‡†åŒ– | `core/logger.py` |
| **å‰ç«¯** | ç‹¬ç«‹ React åº”ç”¨ | `frontend/*` |

---

## 6. è¿ç§»å®æ–½è®¡åˆ’

### é˜¶æ®µ 1: åŸºç¡€è®¾æ–½å‡†å¤‡ï¼ˆWeek 1ï¼‰

**ç›®æ ‡**: å»ºç«‹è§„èŒƒå’Œæ¨¡æ¿

- [x] åˆ›å»º `MODULAR_ARCHITECTURE.md`ï¼ˆæœ¬æ–‡ä»¶ï¼‰
- [ ] åˆ›å»º `docs/API_STANDARDS.md`
- [ ] åˆ›å»º `docs/TESTING_GUIDE.md`
- [ ] åˆ›å»º `backend/skills/` ç›®å½•
- [ ] åˆ›å»º Skill æ¨¡æ¿å’Œæµ‹è¯•æ¨¡æ¿

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ‰€æœ‰è§„èŒƒæ–‡æ¡£å®Œæˆ
- âœ… ç›®å½•ç»“æ„å°±ç»ª
- âœ… å¼€å‘æŒ‡å—å¯ç”¨

---

### é˜¶æ®µ 2: æå–æ ¸å¿ƒ Skillsï¼ˆWeek 2-3ï¼‰

**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**ä»»åŠ¡åˆ—è¡¨**:
1. **è¡¨æ ¼æå– Skill**
   - ä» `agents/preprocessor.py` æå– `pdfplumber` é€»è¾‘
   - åˆ›å»º `skills/table_extractor.py`
   - ç¼–å†™å•å…ƒæµ‹è¯• `tests/test_skills/test_table_extractor.py`
   - æ›´æ–° `engines/parse_engine.py` è°ƒç”¨æ–° Skill

2. **å›¾åƒå¤„ç† Skill**
   - è¿ç§» `engines/image_extractor.py` â†’ `skills/image_processor.py`
   - æ ‡å‡†åŒ–è¾“å…¥è¾“å‡ºæ ¼å¼
   - ä¿æŒåŸæœ‰ API å…¼å®¹æ€§

3. **æ ¼å¼è½¬æ¢ Skill**
   - æ•´åˆåˆ†æ•£çš„æ ¼å¼è½¬æ¢é€»è¾‘
   - åˆ›å»º `skills/format_converter.py`
   - æ”¯æŒ PDF/DOCX/TXT äº’è½¬

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ‰€æœ‰ Skill æœ‰ç‹¬ç«‹æµ‹è¯•
- âœ… åŸæœ‰åŠŸèƒ½é›¶ç ´å
- âœ… ä»£ç è¦†ç›–ç‡ > 80%

---

### é˜¶æ®µ 3: å®Œå–„ MCP æœåŠ¡å™¨ï¼ˆWeek 4-5ï¼‰

**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

**ä»»åŠ¡åˆ—è¡¨**:
1. **é€»è¾‘éªŒè¯ MCP**
   - å®Œå–„ `mcp-servers/logic-checking/`
   - å®ç°ç« èŠ‚é€»è¾‘ä¸€è‡´æ€§æ£€æŸ¥
   - æä¾› AI å¯è°ƒç”¨çš„éªŒè¯å·¥å…·

2. **é€»è¾‘å­¦ä¹  MCP**
   - å®Œå–„ `mcp-servers/logic-learning/`
   - å®ç°å­¦ä¹ ç»“æœå­˜å‚¨å’Œæ£€ç´¢
   - æ”¯æŒå¢é‡å­¦ä¹ 

3. **ä¸“å®¶é¡¾é—® MCP**ï¼ˆå¯é€‰ï¼‰
   - æ–°å»º `mcp-servers/expert-advisor/`
   - å°è£… `multi_agent_evaluator` åŠŸèƒ½
   - æä¾›ä¸“å®¶è¯„å®¡å»ºè®®

**éªŒæ”¶æ ‡å‡†**:
- âœ… MCP æœåŠ¡å™¨å¯ç‹¬ç«‹è¿è¡Œ
- âœ… AI åŠ©æ‰‹å¯æˆåŠŸè°ƒç”¨
- âœ… HTTP API åŒæ­¥æä¾›

---

### é˜¶æ®µ 4: æµ‹è¯•å’Œæ–‡æ¡£ï¼ˆWeek 6ï¼‰

**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] ç¼–å†™é›†æˆæµ‹è¯•å¥—ä»¶
- [ ] æ›´æ–° README.md
- [ ] å½•åˆ¶ä½¿ç”¨æ¼”ç¤ºè§†é¢‘
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç«¯åˆ°ç«¯æµ‹è¯•é€šè¿‡
- âœ… æ–‡æ¡£å®Œæ•´å‡†ç¡®
- âœ… æ€§èƒ½æ— å›é€€

---

### é˜¶æ®µ 5: ä¼˜åŒ–å’Œæ¨å¹¿ï¼ˆWeek 7+ï¼‰

**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½

**ä»»åŠ¡åˆ—è¡¨**:
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜ã€å¹¶å‘ï¼‰
- [ ] ç›‘æ§å’Œå‘Šè­¦
- [ ] å¼€å‘è€…åŸ¹è®­
- [ ] ç¤¾åŒºæ¨å¹¿

---

## 7. å¼€å‘æŒ‡å—

### 7.1 åˆ›å»ºæ–° MCP æœåŠ¡å™¨

#### æ­¥éª¤ 1: ä½¿ç”¨æ¨¡æ¿

```bash
cd mcp-servers
cp -r document-parser/ my-new-service/
cd my-new-service
```

#### æ­¥éª¤ 2: ä¿®æ”¹é…ç½®

```json
// package.json
{
  "name": "@bidding/mcp-my-service",
  "description": "æˆ‘çš„æ–°æœåŠ¡",
  "main": "dist/index.js"
}
```

#### æ­¥éª¤ 3: å®ç°å·¥å…·

```typescript
// src/index.ts
server.setRequestHandler(CallToolRequestSchema, async (request) => {
  const { name, arguments: args } = request.params;
  
  switch (name) {
    case "my_tool":
      return await handleMyTool(args);
    default:
      throw new Error(`æœªçŸ¥å·¥å…·: ${name}`);
  }
});
```

#### æ­¥éª¤ 4: Python åç«¯ï¼ˆå¯é€‰ï¼‰

```python
# python/my_service_backend.py
def handle_my_tool(params: dict) -> dict:
    """å®é™…ä¸šåŠ¡é€»è¾‘"""
    return {"result": "success"}
```

#### æ­¥éª¤ 5: æµ‹è¯•

```bash
./setup.sh
npm test
python test/test_mcp.py
```

---

### 7.2 åˆ›å»ºæ–° Skill

#### æ¨¡æ¿

```python
# backend/skills/my_skill.py

from typing import Any, Dict
from pydantic import BaseModel, Field

class MySkillInput(BaseModel):
    """è¾“å…¥å‚æ•°"""
    data: str = Field(..., description="è¾“å…¥æ•°æ®")

class MySkillOutput(BaseModel):
    """è¾“å‡ºç»“æœ"""
    result: str
    confidence: float

class MySkill:
    """
    æˆ‘çš„æŠ€èƒ½æè¿°
    
    èŒè´£: å•ä¸€åŠŸèƒ½
    ä¾èµ–: æ— å¤–éƒ¨ä¾èµ–
    """
    
    def __init__(self):
        pass
    
    def execute(self, input_data: MySkillInput) -> MySkillOutput:
        """æ‰§è¡Œä¸»é€»è¾‘"""
        # å®ç°åŠŸèƒ½
        return MySkillOutput(
            result="å¤„ç†ç»“æœ",
            confidence=0.95
        )
```

#### æµ‹è¯•

```python
# backend/tests/test_skills/test_my_skill.py

import pytest
from skills.my_skill import MySkill, MySkillInput

def test_my_skill_basic():
    skill = MySkill()
    input_data = MySkillInput(data="æµ‹è¯•æ•°æ®")
    output = skill.execute(input_data)
    
    assert output.result is not None
    assert output.confidence > 0.0
```

---

### 7.3 é›†æˆåˆ°å¼•æ“

```python
# backend/engines/my_engine.py

from skills.my_skill import MySkill, MySkillInput

class MyEngine:
    def __init__(self):
        self.skill = MySkill()
    
    def process(self, data: str) -> dict:
        """è°ƒç”¨ Skill å¤„ç†æ•°æ®"""
        input_data = MySkillInput(data=data)
        result = self.skill.execute(input_data)
        return result.dict()
```

---

### 7.4 ä»£ç ä¿æŠ¤è§„åˆ™

âš ï¸ **ä¿®æ”¹å‰å¿…è¯»**:

1. **è¿è¡Œç«¯å£æ£€æŸ¥**:
   ```bash
   ./check_ports.sh
   ```

2. **æ£€æŸ¥å—ä¿æŠ¤æ–‡ä»¶**:
   - é˜…è¯» `CODE_PROTECTION.md`
   - éªŒè¯æ–‡ä»¶æ˜¯å¦åœ¨ä¿æŠ¤åˆ—è¡¨

3. **åˆ›å»ºåˆ†æ”¯**:
   ```bash
   git checkout -b feature/my-new-feature
   ```

4. **ç¼–å†™æµ‹è¯•**:
   - å…ˆå†™æµ‹è¯•ï¼Œåå†™å®ç°ï¼ˆTDDï¼‰
   - ç¡®ä¿è¦†ç›–ç‡ > 80%

5. **è¿è¡ŒéªŒè¯**:
   ```bash
   python verify_knowledge_display.py
   pytest tests/
   ```

---

## 8. è´¨é‡ä¿éšœ

### 8.1 æµ‹è¯•è¦æ±‚

#### å•å…ƒæµ‹è¯•
- **è¦†ç›–ç‡**: > 80%
- **å·¥å…·**: `pytest`
- **ä½ç½®**: `backend/tests/test_skills/`

```bash
pytest tests/test_skills/ --cov=skills --cov-report=html
```

#### é›†æˆæµ‹è¯•
- **èŒƒå›´**: MCP æœåŠ¡å™¨ + HTTP API
- **ä½ç½®**: `backend/tests/test_mcp/`

```bash
pytest tests/test_mcp/ -v
```

#### ç«¯åˆ°ç«¯æµ‹è¯•
- **èŒƒå›´**: å®Œæ•´ä¸šåŠ¡æµç¨‹
- **å·¥å…·**: `test_final_verification.py`

```bash
python test_final_verification.py
```

---

### 8.2 æ€§èƒ½è¦æ±‚

| æŒ‡æ ‡ | ç›®æ ‡ | æµ‹è¯•æ–¹æ³• |
|------|------|---------|
| **API å“åº”æ—¶é—´** | < 500ms (P95) | `pytest-benchmark` |
| **MCP å¯åŠ¨æ—¶é—´** | < 2s | æ‰‹åŠ¨æµ‹è¯• |
| **å†…å­˜å ç”¨** | < 500MB (å•è¿›ç¨‹) | `memory_profiler` |
| **å¹¶å‘å¤„ç†** | > 10 req/s | `locust` è´Ÿè½½æµ‹è¯• |

---

### 8.3 ä»£ç è´¨é‡

#### é™æ€æ£€æŸ¥
```bash
# ç±»å‹æ£€æŸ¥
mypy backend/skills/

# ä»£ç é£æ ¼
black backend/skills/
flake8 backend/skills/
```

#### å®‰å…¨æ£€æŸ¥
```bash
# ä¾èµ–æ¼æ´æ‰«æ
pip-audit

# ä»£ç å®‰å…¨æ‰«æ
bandit -r backend/
```

---

## 9. å¸¸è§é—®é¢˜

### Q1: ä»€ä¹ˆæ—¶å€™ç”¨ MCPï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Skillï¼Ÿ

**åˆ¤æ–­æ ‡å‡†**:
- AI éœ€è¦ç›´æ¥è°ƒç”¨ â†’ **MCP**
- åç«¯å†…éƒ¨è°ƒç”¨ â†’ **Skill**
- ä¸¤è€…éƒ½éœ€è¦ â†’ **æ··åˆæ¨¡å¼**ï¼ˆå¦‚ knowledge-baseï¼‰

### Q2: å¦‚ä½•å¤„ç†ç°æœ‰ä»£ç è¿ç§»ï¼Ÿ

**åŸåˆ™**:
1. **ä¸ç ´åç°æœ‰åŠŸèƒ½** - å…ˆåˆ›å»ºæ–°å®ç°ï¼Œåæ›¿æ¢
2. **ä¿æŒ API å…¼å®¹** - æ—§æ¥å£ç»§ç»­å·¥ä½œ
3. **æ¸è¿›å¼è¿ç§»** - ä¸€æ¬¡åªè¿ç§»ä¸€ä¸ªæ¨¡å—
4. **å……åˆ†æµ‹è¯•** - è¿ç§»å‰ååŠŸèƒ½ä¸€è‡´

### Q3: MCP æœåŠ¡å™¨å¯åŠ¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**æ’æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥ç¼–è¯‘
cd mcp-servers/<service-name>
npm run build

# 2. æ£€æŸ¥ä¾èµ–
npm install

# 3. æŸ¥çœ‹æ—¥å¿—
node dist/index.js  # ç›´æ¥è¿è¡Œçœ‹é”™è¯¯

# 4. æµ‹è¯• Python åç«¯
python python/<backend>.py
```

### Q4: å¦‚ä½•è°ƒè¯• MCP é€šä¿¡ï¼Ÿ

**æ–¹æ³•**:
```python
# backend/debug_mcp.py
import asyncio
from core.mcp_client import get_knowledge_base_client

async def debug():
    client = get_knowledge_base_client()
    # è®¾ç½®æ—¥å¿—çº§åˆ«
    import logging
    logging.basicConfig(level=logging.DEBUG)
    
    result = await client.call_tool("search_knowledge", {
        "query": "æµ‹è¯•"
    })
    print(result)

asyncio.run(debug())
```

---

## 10. å‚è€ƒèµ„æº

### å†…éƒ¨æ–‡æ¡£
- [CODE_PROTECTION.md](./CODE_PROTECTION.md) - ä»£ç ä¿æŠ¤è§„èŒƒ
- [DOCKER_PRINCIPLES.md](./DOCKER_PRINCIPLES.md) - Docker ä½¿ç”¨åŸåˆ™
- [PORT_CONSISTENCY.md](./PORT_CONSISTENCY.md) - ç«¯å£ä¸€è‡´æ€§åŸåˆ™
- [mcp-servers/README.md](./mcp-servers/README.md) - MCP æœåŠ¡å™¨æ€»è§ˆ

### å¤–éƒ¨èµ„æº
- [Model Context Protocol](https://modelcontextprotocol.io/) - MCP å®˜æ–¹æ–‡æ¡£
- [FastAPI Best Practices](https://fastapi.tiangolo.com/tutorial/) - FastAPI æŒ‡å—
- [Pydantic Documentation](https://docs.pydantic.dev/) - æ•°æ®éªŒè¯

---

## 11. æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´å†…å®¹ |
|------|------|---------|
| 2025-12-16 | 1.0.0 | åˆå§‹ç‰ˆæœ¬ï¼Œå®šä¹‰æ¶æ„è§„èŒƒ |

---

**ç»´æŠ¤è€…**: Copilot + å¼€å‘å›¢é˜Ÿ  
**è”ç³»æ–¹å¼**: è§é¡¹ç›® README.md
